<link rel="stylesheet" href="css/tutorial.css" />
<h1>Sub Process</h1>
<p>همانطور که مشاهده می شود مثال های ارائه شده در این برنامه آموزشی یا دارای فرایندهای ساده هستند و یا اگر دارای فرایندهای پیچیده باشند به طور سطحی مورد مطالعه قرار می گیرند به گونه ای که کل مدل در یک صفحه جا می گیرد. اینکه مدل فرایندی در یک صفحه جای گیرد این مزیت را ایجاد می کند که شما می توانید با مشاهده کل فرایند ایده های بیشتری را جهت بهبود پیشنهاد دهید و همبستگی بین فعالیت‌ها را بهتر تشخیص دهید. در ادامه بایستی به منظور توسعه مدل، شرح مفصلی از فرایند را استخراج و ارائه نموده که با آنالیز و تحلیل آن می توان نقاط ضعف و قوت فرایند را شناسایی نموده و درباره چگونگی اجرای آن بحث و تبادل نظر نمود. در این حالت ممکن است اصلاحات انجام شده موجب ایجاد تفاوت هایی بین مدل فرایندی اصلاح شده و نمودار جریان ابتدایی شود که می توانند در نرم افزار BPMS در نظر گرفته شوند.</p>
<p>BPMN این امکان را فراهم می کند که با طراحی و ایجاد Sub Process ها، توسعه و گسترش مدل فرایندی راحت تر انجام می شود. Sub Process ها توالی فرایندها را به تفصیل تشریح می نمایند اما هیچگونه فضایی را به مدل فرایندی اضافه نمی کند و همه این اطلاعات را تنها در قالب یک Activity ارائه می دهد. در واقع Sub Process کلیه این اطلاعات را در درون خود ذخیره می کند که در صورت نیاز می توان با باز کردن آن به تمامی این اطلاعات دست یافت اما در حالت عادی به منظور جلوگیری از شلوغ شدن مدل فرایندی این اطلاعات را نمایش نمی دهد. این ویژگی دو مزیت دارد که عبارتند از:</p>
<img class="descImage fillImage" src="images/tutorial/SubProcess1.png" />
<ul>
    <li>نمایش دادن جزیئات Sub Process در یک نمودار فرایند جداگانه؛ که با کلیک بر روی آیکون + در Sub Process صفحه جدیدی باز می‌شود که جزییات Sub Process را نمایش می دهد.</li>
    <li>توسعه مدل فرایندی از طریق Sub Process؛ </li>
</ul>
<p>در مدل فرایندی، فعالیتی که دارای علامت + می‌باشد Collapsed Sub Process نامیده می شود. در واقع علامت + به شما پیشنهاد می دهد که با کلیک بر روی این فعالیت می توانید Sub Process را مشاهده و آن را Expand كنيد. نمودار زیر نشان می دهد که چگونه Sub Process در درون فرایند اصلی به طور مستقیم Expand شده است. ابزارهاي مدلسازي شما را قادر می سازند تا علاوه بر توسعه مدل، بتوانید تغییرات را مستقیما در مدل نمایش دهید و یا آنها را مخفی نمایید.</p>
<img class="descImage fillImage" src="images/tutorial/SubProcess2.png" />
<p>در این حین، ممکن است Direct Expansion جالب به نظر برسد، اما معمولا چنین اقدامی در عملا زیاد مفید به نظر نمی رسد، چرا که Direct Expantion،  Sub Process مستلزم این موضوع می باشد که تمام نمادهایی که در همسایگی Sub Process قرار دارند را متناسب با اندازه و ساختار Sub Process جابجا نمود که این موضوع می تواند باعث بروز مشکلاتی نظیر کندی در اجرای عملکرد و به هم ریختن ظاهر کلی فرایند گردد. با توجه به مطالب بیان شده، با این نتیجه مي رسيم که با استفاده از Sub Process می توان جزییات هر یک از بخش‌ها را به طور کامل و بدون اینکه هیچ یک از مشکلات بیان شده ایجاد شود در مدل فرایندی منظور نمود و این موضوع یک ویژگی بسیار مهم در BPMN می باشد.</p>
<hr />
<h2>Boundary Events</h2>
<p>
    تا اینجا یادگرفته ایم که که چگونه رویدادهای میانی می توانند به فعالیت ها attach شوند. این رویدادها همچنین می توانند به به Sub Process نیز attach شوند که این ویژگی، طیف گسترده ای از فرصت ها را در مدل سازی فرایند ایجاد می نماید. همانطور که در نمودار زیر نشان داده شده است، ما می توانیم نشان دهیم که چگونه یک دعوت شام بخودی خود می تواند منجر به لغو فرایند پخت و پز شود. هر چند که در فرایند نشان داده شده، اگر سفارش ما آماده شده باشد و مشغول خوردن غذا باشیم ، می توانیم دعوت را نادیده بگیریم.
</p>
<img class="descImage fillImage" src="images/tutorial/SubProcess3.png" />
<p>
    جاهایی که Message Event، Timer Event و Conditional Event فعال می شوند، فرایند اصلی Sub Process را رها كرده و آنرا اجرا نميكند. همچنین با attach کردن eventهايي نظیر Error، Cancellation و Escalation به آن، Sub Process اتفاق افتادن رويداد را به فرایند اصلی اطلاع می دهد.
</p>
<img class="descImage fillImage" src="images/tutorial/SubProcess4.png" />
<p>
    در گوشه پایین و سمت چپ نمودار بالا، فعالیت Procurement می تواند به دليل عدم موجودي كالا با موفقيت پايان نيابد. از آن جایی که فعالیت Procurement، یک Global Sub Process می باشد، از این رو می تواند یک Error Event را مبنی بر اینکه در فرایند خطایی وجود دارد به فرایند اصلی ارسال نماید. به عبارت دیگر با این عمل به فرایند اصلی اطلاع می دهد که در روند اجرایی فرایند مشکلی وجود دارد. یک مثال خوب در این زمینه می تواند این موضوع باشد که برای مثال ممکن است مشتری که قصد خرید کالایی را داشته است به دلیل عدم موجودی انبار، سفارشش انجام نشده باشد و بخواهد این موضوع را به فروشنده اطلاع دهد. در واقع این مثال می تواند یک نمونه واقعی از آنچه که در بالا به آن پرداخته شد باشد.
</p>
<p>
    نکته قابل توجه در این موضوع این می باشد که فرایند اصلی می تواند پیام های خطای متفاوتی را کنترل و اداره کند. در مثال ارائه شده، در حالی که مشتریان بایستی توسط واحد سفارش ازعدم موجودی مطلع شوند، بايد نام کالا نيز از كانالوگ محصولات حذف شود. در این حالت فرایند اصلی، تصمیم می گیرد که برای لغو سفارش Sub Process چه چیزی نیاز می باشد و در صورت لغو چه اتفاقی خواهد افتاد. در واقع این موضوع یک اصل می باشد که شما می توانید از آن در جهت ایجاد فرایندهای انعطاف پذیر و ماژولار استفاده کنید.
</p>
<p>
    Signal Event در دوحالت مورد استفاده قرار می گیرد. به طور کلی یک فرایند می تواند به Signal دریافت شده از خارج که توسط Sub Process منتشر شده است واکنش نشان دهد. در این حالت، Signal Event بسیار شبیه به Message Event عمل می کند. اما مورد استفاده دیگر این سیگنال زمانی می‌باشد که بخواهیم به Sub Process امكان ارتباط برقرار کردن با فرایند اصلی را با ابزاری به جز error ها فراهم نماییم. اصولاً دلیل اصلی استفاده از این رویداد عدم قابلیت استفاده از Message Event در برخی از موارد ارتباطی می‌باشد. در واقع BPMN فرض می کند که ما همیشه Message ها را برای ارسال پیام به Participantهايي که در خارج محدوده Pool موردنظر قرار دارند ارسال می کنیم و این موضوع سبب می شود که در این موارد خاص از Signal Event استفاده شود. بایستی به این نکته نیز توجه داشت که از Signal Event برای ارتباط های مستقیم استفاده نمی شود بلکه برای پخش اطلاعات شبیه به تبلیغات در رادیو و تلویزیون استفاده می شود.
</p>
<p>
    رویداد جایگزین بهتری که در .BPMN 2.0 در نظر گرفته شده است Escalation Event می باشد. یک Sub Process می تواند از Escalation Event به منظور گزارش دادن مستقیم به فرایند اصلی استفاده نماید که در این حالت Message مورد نظر نمی تواند از نوع Error Message باشد. همچنین فرایند اصلی می تواند پیغام های فرایند را از طریق Escalation Event و البته بدون توقف Sub Process دریافت نماید چرا که این Non-Interupting Intermediate Eventها می توانند در چنین مواردی به Sub Process ، Attachشوند.
</p>
<img class="descImage fillImage" src="images/tutorial/SubProcess51.png" />
<img class="descImage fillImage" src="images/tutorial/SubProcess52.png" />
