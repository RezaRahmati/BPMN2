<link rel="stylesheet" href="css/tutorial.css" />
<h1>Sub Process</h1>
<p>همانطور که مشاهده می شود مثال های ارائه شده در این فایل آموزشی یا دارای فرایندهای ساده هستند و یا اگر دارای فرایندهای پیچیده باشند به طور سطحی مورد مطالعه قرار می گیرند به گونه ای که کل مدل در یک صفحه جا می گیرد و این در حالیست که اگر مدل فرایندی شما به حالت Landscape باشد چنین امکانی وجود ندارد. اینکه مدل فرایندی در یک صفحه جای گیرد این مزیت را ایجاد می کند که شما می توانید با مشاهده کل فرایند ایده های بیشتری را جهت بهبود پیشنهاد دهید و همبستگی بین فعالیت‌ها را بهتر تشخیص دهید. در ادامه بایستی به منظور توسعه مدل، شرح مفصلی از فرایند را استخراج و ارائه نموده که با انالیز و تحلیل آن می توان نقاط ضعف و قوت فرایند را شناسایی نموده و درباره چگونگی اجرای آن بحث و تبادل نظر نمود. در این حالت ممکن است اصلاحات انجام شده موجب ایجاد تفاوت هایی بین مدل فرایندی اصلاح شده و نمودار جریان پیش پا افتاده ابتدایی شود که می توانند در نرم افزار BPM در نظر گرفته شوند.</p>
<p>BPMN این امکان را فراهم می کند که با طراحی و ایجاد subprocess ها، توسعه و گسترش مدل فرایندی راحت تر انجام می شود. subprocess ها توالی فرایندها را به تفصیل تشریح می نمایند اما هیچگونه فضایی را به مدل فرایندی اضافه نمی کند و همه این اطلاعات را تنها در قالب یک وظیفه ارائه می دهد. در واقع subprocess کلیه این اطلاعات را در درون خود ذخیره می کند که در صورت نیاز می توان با باز کردن آن به تمامی این اطلاعات دست یافت اما در حالت عادی به منظور جلوگیری از شلوغ شدن مدل فرایندی این اطلاعات را نمایش نمی دهد. این ویژگی دو مزیت دارد که عبارتند از:</p>
<img class="descImage fillImage" src="images/tutorial/SubProcess1.png" />
<ul>
    <li>نمایش دادن جزیئات subprocess در یک نمودار فرایند جداگانه؛ که با کلیک بر روی آیکون + در subprocess صفحه جدیدی باز می‌شود که جزییات subprocess را نمایش می دهد.</li>
    <li>توسعه مدل فرایندی از طریق subprocess؛ </li>
</ul>
<p>در مدل فرایندی، فعالیتی که دارای علامت + می‌باشد collapsed subprocess نامیده می شود. در واقع علامت + به شما پیشنهاد می دهد که با کلیک بر روی این فعالیت می توانید subprocess را مشاهده و آن را توسعه دهید. نمودار زیر نشان می دهد که چگونه subprocess در درون فرایند اصلی به طور مستقیم توسعه داده شده است. ابزار حمایت کننده این عملکرد شما را قادر می سازد تا علاوه بر توسعه مدل، بتوانید تغییرات توسعه داده شده را مستقیما در مدل نمایش دهید و یا آنها را مخفی نمایید.</p>
<img class="descImage fillImage" src="images/tutorial/SubProcess2.png" />
<p>در این حین، ممکن است توسعه مستقیم جالب تر به نظر برسد، اما معمولا چنین اقدامی در کارهای عملی زیاد مفید به نظر نمی رسد، چرا که توسعه مستقیم subprocess مستلزم این موضوع می باشد که تمام نمادهایی که در همسایگی subprocess قرار دارند را بایستی متناسب با اندازه و ساختار subprocess جابجا نمود که این موضوع می تواند باعث بروز مشکلاتی نظیر کندی در اجرای عملکرد و به هم ریختن ظاهر کلی فرایند گردد. با توجه به مطالب بیان شده، با این نتیجه خواهیم رسید که با استفاده از subprocess می توان جزییات هر یک از بخش‌ها را به طور کامل و بدون اینکه هیچ یک از مشکلات بیان شده ایجاد شود در مدل فرایندی منظور نمود و این موضوع یک ویژگی بسیار مهم در BPMN می باشد.</p>
<hr />
<h2>Attaching Events</h2>
<p>
    تا اینجا یادگرفته ایم که که چگونه رویدادهای میانی می توانند به فعالیت ها ضمیمه (پیوست) شوند. این رویدادها همچنین می توانند به به subprocess نیز ضمیمه شوند که این ویژگی، طیف گسترده ای از فرصت ها را در مدل سازی فرایند ایجاد می نماید. همانطور که در نمودار زیر نشان داده شده است، ما می توانیم نشان دهیم که چگونه یک دعوت شام بخودی خود می تواند منجر به لغو فرایند پخت و پز شود. هر چند که در فرایند نشان داده شده، اگر سفارش ما اماده شده باشد و مشغول خوردن غذا باشیم ، می توانیم دعوت را نادیده بگیریم.
</p>
<img class="descImage fillImage" src="images/tutorial/SubProcess3.png" />
<p>
    جاهایی که رویدادهای message، timer و conditional استفاده می شوند، فرایند اصلی همیشه در واکنش به شرایط خارجی طوری عمل می کند که subprocess بی نتیجه بماند. همچنین با ضمیمه کردن subprocess با رویدادهایی نظیر error، cancellation و escalation مراتب را به فرایند اصلی گزارش می دهد.
</p>
<img class="descImage fillImage" src="images/tutorial/SubProcess4.png" />
<p>
    در گوشه پایین و سمت چپ نمودار بالا، فعالیت procurement می تواند به اتمام برسد چرا که دیگر در دسترس نیست. از آن جایی که فعالیت procurement، یک global subprocess می باشد، از این رو می تواند یک رویداد error را مبنی بر اینکه در فرایند خطایی وجود دارد به فرایند اصلی ارسال نماید. به عبارت دیگر با این عمل به فرایند اصلی اطلاع می دهد که در روند اجرایی فرایند مشکلی وجود دارد. یک مثال خوب در این زمینه می تواند این موضوع باشد که برای مثال در شرایط کسب و کار، ممکن است مشتری که قصد خرید کالایی را داشته است به دلیل عدم موجودی انبار، سفارشش انجام نشده باشد و بخواهد این موضوع را به فروشنده اطلاع دهد. در واقع این مثال می تواند یک نمونه واقعی از آنچه که در بالا به آن پرداخته شد باشد.
</p>
<p>
    نکته قابل توجه در این موضوع این می باشد که فرایند اصلی می تواند پیام های خطای متفاوتی را کنترل و اداره کند. در مثال ارائه شده، در حالی که مشتریان نا امیدشده بایستی توسط حوزه سفارش فرایند ازعدم موجودی مطلع شوند، کافی است برای فرایند نگهداری کالا در انبار ، نام کالای مورد نظر از فهرست حذف شود. در این حالت فرایند اصلی مربوط به بخش مورد نظر، تصمیم می گیرد که برای لغو سفارش subprocess چه چیزی نیاز می باشد و در صورت لغو چه اتفاقی خواهد افتاد. در واقع این موضوع یک اصل می باشد که شما می توانید از آن در جهت ایجاد فرایندهای انعطاف پذیر و مدولار استفاده کنید.
</p>
<p>
    رویداد signal در دوحالت مورد استفاده قرار می گیرد. به طور کلی یک فرایند می تواند به سیگنال دریافت شده از خارج که توسط subprocess منتشر شده است واکنش نشان دهد. در این حالت، رویداد signal بسیار شبیه به رویداد message عمل می کند. اما مورد استفاده دیگر این سیگنال زمانی می‌باشد که بخواهیم به subprocess اجازه ارتباط برقرار کردن با فرایند اصلی را با ابزاری به جز error ها فراهم نماییم. اصولاً دلیل اصلی استفاده از این رویداد عدم قابلیت استفاده از رویداد message در برخی از موارد ارتباطی می‌باشد. در واقع BPMN فرض می کند که ما همیشه message ها را برای ارسال پیام به مشارکت کنندگانی که در خارج محدوده Pool موردنظر قرار دارند ارسال می کنیم و این موضوع سبب می شود که در این موارد خاص از رویداد signal استفاده شود. بایستی به این نکته نیز توجه داشت که از رویداد signal برای ارتباط های مستقیم استفاده نمی شود بلکه برای پخش اطلاعات شبیه به تبلیغات در رادیو و تلویزیون استفاده می شود.
</p>
<p>
    رویداد جایگزین بهتری که در .BPMN 2.0 در نظر گرفته شده است رویداد escalation می باشد. یک subprocess می تواند از رویداد escalation به منظور گزارش دادن مستقیم به فرایند اصلی استفاده نماید که در این حالت پیغام مورد نظر نمی تواند از نوع پیغام خطا باشد. همچنین فرایند اصلی می تواند پیغام های فرایند را از طریق رویداد escalation و البته بدون توقف subprocess دریافت نماید چرا که این رویدادهای میانی بدون وقفه می توانند در چنین مواردی ضمیمه subprocess شوند.
</p>
<img class="descImage fillImage" src="images/tutorial/SubProcess51.png" />
<img class="descImage fillImage" src="images/tutorial/SubProcess52.png" />
